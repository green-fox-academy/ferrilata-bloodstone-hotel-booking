@model HotelBookingApp.Pages.HotelViewModel
@inject IViewLocalizer Localizer
@{
    ViewData["Title"] = Model.Hotel.Name;
}

<style>
    .overlay {
        position: absolute;
        top: 16px;
        left: 15px;
        background: rgba(0, 0, 0, 0.7);
        color: #f1f1f1;
        width: 100px;
        transition: .5s ease;
        opacity: 0;
        color: white;
        font-size: 20px;
        padding: 20px;
        text-align: center;
    }

    .hcontainer:hover .overlay {
        opacity: 1;
    }

    #trash {
        color: #ababab;
    }

        #trash:hover {
            color: #ffffff;
        }

    #thumb {
        color: #b40000;
    }

        #thumb:hover {
            color: #ff0000;
        }

        #thumb:hover, #trash:hover {
            transform: scale(1.5);
        }

    #btn-thumbnail {
        position: absolute;
        top: 0px;
        left: 10px;
        border-radius: 0px;
    }

    #btn-delete {
        position: absolute;
        top: 0px;
        left: 50px;
        border-radius: 0px;
    }
</style>

<div class="container col">
    <div class="d-inline-flex">
        <div class="container">
            @if (Model.Hotel.ThumbnailUrl != null && Model.Hotel.Thumbnail)
            {
                <img class="img-thumbnail" src="@Model.Hotel.ThumbnailUrl" alt="thumbnail" />
            }
            else
            {
                <img class="img-thumbnail" src="~/nopic.png" alt="thumbnail" />
            }
        </div>
        <div class="container">
            <h1>@Model.Hotel.Name</h1>

            <div>@Localizer["Number of stars"]: @Model.Hotel.StarRating</div>
            <div>@Localizer["Hotel type"]: @Localizer[@Model.Hotel.PropertyType.Type]</div>
            <div><b>@Localizer["Address"]:</b> @Model.Hotel.Location.City, @Model.Hotel.Location.Address, @Model.Hotel.Location.Country</div>
            <div>
                <br />
                <h5>@Localizer["About"]:</h5>
                @Model.Hotel.Description
            </div>
            <div>@Localizer["Rooms"]:</div>
            <ul>
                @foreach (var room in @Model.Hotel.Rooms)
                {
                    <li>
                        @room.Name ($@room.Price)
                        <a asp-controller="Reservations" asp-action="Add"
                           asp-route-hotelId="@Model.Hotel.HotelId"
                           asp-route-roomId="@room.RoomId">
                            @Localizer["Reserve"]
                        </a>
                    </li>
                }
            </ul>
        </div>
    </div>
    <div class="buttons">
        @if (User.IsInRole("Admin") || User.IsInRole("HotelManager"))
        {
            <a class="btn btn-primary" asp-controller="Hotels" asp-action="Edit" asp-route-id="@Model.Hotel.HotelId" role="button">@Localizer["Edit"]</a>
            <a class="btn btn-primary" asp-controller="Rooms" asp-action="Add" asp-route-hotelId="@Model.Hotel.HotelId" role="button">@Localizer["Add room"]</a>
            <a class="btn btn-primary" asp-controller="Reservations" asp-action="Index" asp-route-hotelId="@Model.Hotel.HotelId" role="button">@Localizer["Reservations"]</a>
        }
        <a class="btn btn-danger" asp-controller="Home" asp-action="Index" role="button">@Localizer["Go back"]</a>
    </div>
</div>
<hr />
<h2>@Localizer["Gallery"]</h2>

<div class="container">
    <div class="row">
        @if (Model.ImageList.Count() == 0)
        {
            <p>@Localizer["No images."]</p>
        }

        @foreach (var image in Model.ImageList)
        {
            <div class="col-md-4 col-lg-3 col-sm-6 hcontainer">
                <img class="img-fluid my-3" alt="@image.Name" src="@image.Path" />
                @if (User.IsInRole("Admin") || User.IsInRole("HotelManager"))
                {
                    <div class="overlay">
                        <form asp-action="UpdateThumbnail" asp-controller="Hotels" asp-route-id="@Model.Hotel.HotelId" method="post">
                            <button id="btn-thumbnail" class="btn btn-link" type="submit" name="path" value="@image.Path" title="@Localizer["Set as thumbnail"]">
                                <i id="trash" class="fas fa-thumbtack"></i>
                            </button>
                        </form>
                        <form asp-action="DeleteImage" asp-controller="Hotels" asp-route-id="@Model.Hotel.HotelId" method="post">
                            <button id="btn-delete" class="btn btn-link" type="submit" name="path" value="@image.Path">
                                <i id="thumb" class="far fa-trash-alt" title=@Localizer["Delete image"]></i>
                            </button>
                        </form>
                    </div>
                }
            </div>
        }
    </div>
</div>

