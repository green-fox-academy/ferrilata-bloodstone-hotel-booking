@model HotelBookingApp.Pages.HotelViewModel
@inject IViewLocalizer Localizer
@{
    ViewData["Title"] = Model.Hotel.Name;
}

<style>
    .gallery {
        -webkit-column-count: 3;
        -moz-column-count: 3;
        column-count: 3;
        -webkit-column-width: 33%;
        -moz-column-width: 33%;
        column-width: 33%;
    }

        .gallery .pics {
            -webkit-transition: all 350ms ease;
            transition: all 350ms ease;
        }

        .gallery .animation {
            -webkit-transform: scale(1);
            -ms-transform: scale(1);
            transform: scale(1);
        }
</style>

<h1>@Model.Hotel.Name</h1>

<div>@Localizer["Number of stars"]: @Model.Hotel.StarRating</div>
<div>@Localizer["Hotel type"]: @Localizer[@Model.Hotel.PropertyType.Type]</div>
<div>@Localizer["Address"]: @Model.Hotel.Location.City, @Model.Hotel.Location.Address, @Model.Hotel.Location.Country</div>
<div>@Localizer["About"]: <br /> @Model.Hotel.Description</div>
<div>@Localizer["Rooms"]:</div>
<ul>
    @foreach (var room in @Model.Hotel.Rooms)
    {
        <li>
            @room.Name ($@room.Price)
            <a asp-controller="Reservations" asp-action="Add"
               asp-route-hotelId="@Model.Hotel.HotelId"
               asp-route-roomId="@room.RoomId">
                @Localizer["Reserve"]
            </a>
        </li>
    }
</ul>

@if (User.IsInRole("Admin") || User.IsInRole("HotelManager"))
{
    <a class="btn btn-primary" asp-controller="Hotels" asp-action="Edit" asp-route-id="@Model.Hotel.HotelId" role="button">@Localizer["Edit"]</a>
    <a class="btn btn-primary" asp-controller="Rooms" asp-action="Add" asp-route-hotelId="@Model.Hotel.HotelId" role="button">@Localizer["Add room"]</a>
    <a class="btn btn-primary" asp-controller="Reservations" asp-action="Index" asp-route-hotelId="@Model.Hotel.HotelId" role="button">@Localizer["Reservations"]</a>
}
<a class="btn btn-danger" asp-controller="Home" asp-action="Index" role="button">@Localizer["Go back"]</a>

<hr />
<h2>@Localizer["Gallery"]</h2>

<div class="container">
    <div class="row">
        @if (Model.ImageList.Count() == 0)
        {
            <p>@Localizer["No images."]</p>
        }
        @foreach (var image in Model.ImageList)
        {
            <div class="col-md-4 col-lg-3 col-sm-6">
                <img class="img-fluid my-3" src="@image.Path">
                @if (User.IsInRole("Admin") || User.IsInRole("HotelManager"))
                {
                    <form asp-action="DeleteImage" asp-controller="Hotels" asp-route-id="@Model.Hotel.HotelId" method="post">
                        <button class="btn btn-link" type="submit" name="path" value="@image.Path" style="position: absolute; top: -6px; right: -14px;"><i title=@Localizer["Delete Image"] class="fa-image fa-times-circle fa-red-river text-danger fa-2x"></i></button>
                    </form>
                    <form asp-action="UpdateThumbnail" asp-controller="Hotels" asp-route-id="@Model.Hotel.HotelId" method="post">
                        <button class="btn btn-link" type="submit" name="path" value="@image.Path">@Localizer["Set as thumbnail"]<i class="fas fa-level-up-alt mx-2"></i></button>
                    </form>
                }
            </div>
        }
    </div>
</div>

<h2>Waterfall Gallery</h2>
<div class="gallery" id="gallery">
    @for (int i = 0; i < @Model.ImageList.Count(); i += 1)
    {
        <figure class="img-fluid col-sm-12">
            <a href="@Model.ImageList[i].Path">
                <img class="img-fluid my-2" src="@Model.ImageList[i].Path" alt="@Model.ImageList[i].Name">
            </a>
            @if (User.IsInRole("Admin") || User.IsInRole("HotelManager"))
            {
                <form asp-action="DeleteImage" asp-controller="Hotels" asp-route-id="@Model.Hotel.HotelId" method="post">
                    <button class="btn btn-link" type="submit" name="path" value="@Model.ImageList[i].Path" style="position: absolute; top: -6px; right: -14px;"><i title=@Localizer["Delete Image"] class="far fa-times-circle fa-red-river text-danger fa-2x"></i></button>
                </form>
            }
        </figure>
    }
</div>

<div id="carouselExampleControls" class="carousel" data-ride="carousel" style="width:100%; height: 400px;">
    <div class="carousel-inner">
        <div class="carousel-item active">
            <img class="d-block" src="@Model.ImageList[0].Path" alt="First slide">
        </div>
        @for (int i = 1; i < @Model.ImageList.Count(); i += 1)
        {
            <div class="carousel-item">
                <img class="d-block" src="@Model.ImageList[i].Path" alt="First slide">
            </div>
        }
    </div>
    <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
    </a>
</div>

